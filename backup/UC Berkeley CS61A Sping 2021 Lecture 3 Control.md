### **环境链条（Environment Chain）**
for example：
![屏幕截图 2024-12-17 114451](https://github.com/user-attachments/assets/f19c7928-68f6-4753-9118-5ef3482f9ae1)

---


### **环境中的绑定和求值（Binding and Evaluation）**



### 1. **变量赋值（Assigning）**  
- **赋值**（Assigning）将一个数值绑定到一个变量上。  
- 赋值发生在**当前环境的第一个框架**中。  
- 例如：  
  ```python
  x = 5  # x 被绑定到 5
  ```

---

### 2. **函数定义（Def statements）**  
- **def语句**会将一个名称绑定到一个**函数值**上。  
- 这个绑定发生在**当前环境的第一个框架**中。  
- 这个新的**函数值**会保存一个**指向当前环境的链接**。  
- 例如：  
  ```python
  def foo(y):  
      return x + y  # foo 保持了定义时的环境链接
  ```

---

### 3. **函数调用（Calling a Function）**  
- **调用用户自定义函数**时，会创建一个新的**局部环境框架（local environment frame）**。  
- 这个新框架会将函数的**形式参数（formal parameters）**绑定到调用时传入的**实际参数（actual parameters）**上。  
- 例如：  
  ```python
  foo(3)  # 实际参数 3 会绑定到 形式参数 y
  ```

---

### 4. **局部环境与父环境**  
- 这个新的局部框架会连接到**现有的父环境**，这个父环境来自于被调用的函数值的定义时环境。  
- 这样就形成了一个**新局部环境**，在这个环境中求值函数体的内容。  

---

### **总结**  
1. **赋值**：变量被绑定到当前环境的数值。  
2. **def语句**：函数定义时绑定名称，并记录定义时的环境。  
3. **函数调用**：创建局部环境，将参数绑定到实参，并连接到父环境。  

这种机制确保了程序可以正确地查找变量和参数值，形成一个清晰的环境链条。
